<div class="title-block">
  <h3 class="title pull-left">
    Страница истории<span class="sparkline bar"></span>
  </h3>
  <div class="pull-right">
    <button class="btn-sm btn btn-primary-outline" (click)="openFilter()">
      <i class="fa fa-filter"></i>
    </button>
  </div>
  <div class="pull-right">
    <button class="btn-sm btn btn-danger-outline m-r-2" *ngIf="isFiltered" (click)="cancelFilter()">
      <i class="fa fa-filter"></i>
    </button>
  </div>
</div>

<div class="text-center" *ngIf="!isLoaded">Loading...</div>

<div *ngIf="isLoaded">
  <pht-history-chart [data]="chartData"></pht-history-chart>

  <pht-history-events [events]="filteredEvents" [categories]="categories"></pht-history-events>

  <div *ngIf="isFilterVisible">
    <pht-history-filter [categories]="categories" (onFilterCancel)="onFilterCancel()" (inFilterApply)="onFilterApply($event)"></pht-history-filter>
  </div>

</div>

